{
  "hash": "76f8638c4bb35d982f499e48729ff528",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"A test Post\"\nauthor: \"Archimondstat\"\ndate: \"2025-01-03\"\ncategories: [news, code, analysis]\nimage: \"image.jpg\"\n---\n\n\n\nThis is a post with executable code.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n1 + 1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(SASmarkdown)\nlibrary(tidyverse)\nlibrary(survival)\nlibrary(survminer)\n```\n:::\n\n\n\nCreate a simple survival dataset in tibble form.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsurv_data <- tribble(\n  ~AVAL, ~CNSR,\n  1,   0,\n  4,   0,\n  7,   1,\n  8,   1,\n)\nsurv_data\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 Ã— 2\n   AVAL  CNSR\n  <dbl> <dbl>\n1     1     0\n2     4     0\n3     7     1\n4     8     1\n```\n\n\n:::\n:::\n\n\n\nUsing `survival` package in `r` to estimate the median survival time and plot the KM graph.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkm_model <- survfit(Surv(AVAL, CNSR==0) ~ 1, data = surv_data,conf.type=c(\"log-log\"))\nggsurvplot(km_model, data = surv_data, risk.table = FALSE, conf.int = F,\n           title = \"Dummy survival data\", \n           submain = \"Kaplan-Meier estimates\", \n           break.x.by = 1,\n           ylab = \"Survival\",\n           xlab = \"AVAL\",\n           legend.title = \"\",surv.median.line = \"hv\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\nwe can see that in $t=4$, the KM graph coincides with line $y=0.5$, then we estimate the median survival time in `r`,\n\n\n::: {.cell}\n\n```{.r .cell-code}\nquantile(km_model,0.5)$quantile\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n50 \n 6 \n```\n\n\n:::\n:::\n\n\nAccording the result above, the estimated median is $6$.\n\nIn short, `survival` package in `R` and early version of `SAS` (such as 9.1) estimate the quantiles using:\n$$\n\\begin{aligned}\nq_p &= \\frac{1}{2}(\\inf_t\\{1-\\hat{S}(t)\\ge p\\}+\\sup_t\\{1-\\hat{S}(t)\\le q\\})\\\\\n&=\\frac{1}{2}(\\inf_t\\{\\hat{S}(t)\\le 1-p\\}+\\sup_t\\{\\hat{S}(t)\\ge 1-q\\})\\\n\\end{aligned}\n$$\nTherefore the result from `survival` is $\\frac{1}{2}(4+8)=6$.",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}